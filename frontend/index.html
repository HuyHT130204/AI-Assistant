<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jarvis</title>
    <link rel="shortcut icon" href="assets/img/logo.ico" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
   <!-- Bootsrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />

    <!-- Particle js -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"
      type="text/javascript"
    ></script>
    <link rel="stylesheet" href="assets/vendore/texllate/animate.css" />
    <link rel="stylesheet" href="./stylesheets/style.css">
    <link rel="stylesheet" href="./stylesheets/identify.css">
    <link rel="stylesheet" href="./stylesheets/face_auth.css">
    <script src="face_auth.js" defer></script>
</head>
<body>
    <!-- Overlay hộp thoại thiết lập FaceID -->
    <div id="faceIdSetupOverlay" class="overlay" style="display: none;">
        <div id="faceIdSetupDialog" class="dialog modern-dialog" style="display: none;">
            <div class="dialog-icon"><i class="bi bi-person-bounding-box"></i></div>
            <h2>Thiết lập FaceID</h2>
            <p>Bạn có muốn thiết lập nhận diện khuôn mặt để đăng nhập vào ứng dụng này không?</p>
            <div class="dialog-buttons">
                <button id="setupFaceIdBtn" class="btn btn-primary">Thiết lập ngay</button>
                <button id="skipFaceIdBtn" class="btn btn-secondary">Bỏ qua</button>
            </div>
        </div>
        <div id="faceIdSetupProgress" class="dialog modern-dialog progress-container" style="display: none;">
            <div class="spinner"></div>
            <p>Đang thiết lập FaceID...</p>
            <p>Vui lòng nhìn vào camera và giữ khuôn mặt ở giữa</p>
        </div>
        <div id="faceIdSetupSuccess" class="dialog modern-dialog result-message" style="display: none;">
            <div class="dialog-icon success"><i class="bi bi-emoji-smile"></i></div>
            <p>Thiết lập FaceID thành công!</p>
        </div>
        <div id="faceIdSetupError" class="dialog modern-dialog result-message" style="display: none;">
            <div class="dialog-icon error"><i class="bi bi-x-octagon"></i></div>
            <p>Thiết lập FaceID thất bại. Vui lòng thử lại.</p>
        </div>
    </div>

    <!-- Overlay cho Authentication Failed Dialog -->
    <div id="authFailedOverlay" class="overlay" style="display: none;">
        <div id="authFailedDialog" class="dialog modern-dialog" style="display: none;">
            <div class="dialog-icon error"><i class="bi bi-x-circle"></i></div>
            <h2>Authentication Failed</h2>
            <p>Face not recognized. You need to authenticate to access the system.</p>
            <div class="dialog-buttons">
                <button id="retryAuthBtn" class="button primary">Try Again</button>
                <button id="exitAppBtn" class="button secondary">Exit</button>
            </div>
        </div>
    </div>

    <!-- Overlay cho Face ID Required Dialog -->
    <div id="faceIdRequiredOverlay" class="overlay" style="display: none;">
        <div id="faceIdRequiredDialog" class="dialog modern-dialog" style="display: none;">
            <div class="dialog-icon info"><i class="bi bi-exclamation-triangle"></i></div>
            <h2>Face ID Required</h2>
            <p>For security reasons, Face ID setup is required to use this application.</p>
            <p>Please complete the Face ID setup process to continue.</p>
        </div>
    </div>

    <!-- Hộp thoại thông báo cần mở lại app -->
    <div id="manualRestartOverlay" class="overlay" style="display: none;">
        <div id="manualRestartDialog" class="dialog modern-dialog" style="display: none;">
            <div class="dialog-icon info"><i class="bi bi-info-circle"></i></div>
            <h2>Thiết lập FaceID thành công</h2>
            <p>Vui lòng <b>tắt và mở lại ứng dụng</b> để hoàn tất quá trình thiết lập.</p>
        </div>
    </div>

    <div class="container">
      <section id="Start">
        <div class="row">
          <div class="col-lg-12">
            <!-- Chat History -->
            <div id="chatHistory" class="mb-4" style="display: none;">
              <div id="chatHistoryContent"></div>
            </div>
            
            <div
              class="d-flex justify-content-center align-items-center universe-background"
              style="height: 100vh; position: relative; overflow: hidden; display: flex; flex-direction: column; margin: 0; padding: 0;"
            >
              <!-- Enhanced Universe Background -->
              <div class="stars-deep"></div>
              <div class="stars-mid"></div>
              <div class="stars-near"></div>
              <div class="nebula"></div>
              
              <!-- Enhanced Solar System with Planets -->
              <div class="solar-system">
                <div class="sun">
                  <div class="sun-glow"></div>
                </div>
                
                <!-- Mercury Orbit and Planet -->
                <div class="orbit mercury-orbit">
                  <div class="planet mercury">
                    <div class="planet-atmosphere mercury-atmosphere"></div>
                  </div>
                </div>
                
                <!-- Venus Orbit and Planet -->
                <div class="orbit venus-orbit">
                  <div class="planet venus">
                    <div class="planet-atmosphere venus-atmosphere"></div>
                  </div>
                </div>
                
                <!-- Earth Orbit and Planet -->
                <div class="orbit earth-orbit">
                  <div class="planet earth">
                    <div class="planet-atmosphere earth-atmosphere"></div>
                    <div class="moon-orbit">
                      <div class="moon"></div>
                    </div>
                  </div>
                </div>
                
                <!-- Mars Orbit and Planet -->
                <div class="orbit mars-orbit">
                  <div class="planet mars">
                    <div class="planet-atmosphere mars-atmosphere"></div>
                  </div>
                </div>
                
                <!-- Asteroid Belt -->
                <div class="asteroid-belt">
                  <div class="asteroid a1"></div>
                  <div class="asteroid a2"></div>
                  <div class="asteroid a3"></div>
                  <div class="asteroid a4"></div>
                  <div class="asteroid a5"></div>
                  <div class="asteroid a6"></div>
                  <div class="asteroid a7"></div>
                  <div class="asteroid a8"></div>
                </div>
                
                <!-- Jupiter Orbit and Planet -->
                <div class="orbit jupiter-orbit">
                  <div class="planet jupiter">
                    <div class="planet-atmosphere jupiter-atmosphere"></div>
                    <div class="jupiter-bands"></div>
                  </div>
                </div>
                
                <!-- Saturn Orbit and Planet -->
                <div class="orbit saturn-orbit">
                  <div class="planet saturn">
                    <div class="planet-atmosphere saturn-atmosphere"></div>
                    <div class="saturn-ring-system">
                      <div class="saturn-ring ring1"></div>
                      <div class="saturn-ring ring2"></div>
                      <div class="saturn-ring ring3"></div>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Centered Initialization Container -->
              <div class="initialization-container">
                <div id="Loader" class="mb-4">
                  <!-- Enhanced Futuristic Circular Loader -->
                  <div class="quantum-core">
                    <div class="data-stream">
                      <div class="data-particle p1"></div>
                      <div class="data-particle p2"></div>
                      <div class="data-particle p3"></div>
                      <div class="data-particle p4"></div>
                      <div class="data-particle p5"></div>
                      <div class="data-particle p6"></div>
                      <div class="data-particle p7"></div>
                      <div class="data-particle p8"></div>
                    </div>
                    <div class="scan-beams">
                      <div class="scan-beam horizontal"></div>
                      <div class="scan-beam vertical"></div>
                      <div class="scan-beam diagonal1"></div>
                      <div class="scan-beam diagonal2"></div>
                    </div>
                  </div>
                </div>
                
                <div id="FaceAuth" class="mb-4 advanced-scanner" hidden>
                  <div class="scanner-frame">
                    <div class="scanner-grid"></div>
                    <div class="scan-beam"></div>
                    <div class="scan-target">
                      <div class="target-ring ring1"></div>
                      <div class="target-ring ring2"></div>
                      <div class="target-crosshair"></div>
                    </div>
                    <div class="scan-corner top-left"></div>
                    <div class="scan-corner top-right"></div>
                    <div class="scan-corner bottom-left"></div>
                    <div class="scan-corner bottom-right"></div>
                    <div class="scan-data">
                      <div class="data-line"></div>
                      <div class="data-line"></div>
                      <div class="data-line"></div>
                    </div>
                  </div>
                </div>
                
                <div id="FaceAuthSuccess" class="mb-4 quantum-success" hidden>
                  <div class="success-field">
                    <div class="success-core"></div>
                    <div class="success-glow"></div>
                    <div class="success-rings">
                      <div class="success-ring ring1"></div>
                      <div class="success-ring ring2"></div>
                      <div class="success-ring ring3"></div>
                    </div>
                    <div class="success-particles">
                      <div class="particle p1"></div>
                      <div class="particle p2"></div>
                      <div class="particle p3"></div>
                      <div class="particle p4"></div>
                      <div class="particle p5"></div>
                    </div>
                    <div class="success-checkmark"></div>
                  </div>
                </div>
                
                <div id="HelloGreet" class="mb-4 cosmic-greeting" hidden>
                  <div class="greeting-nebula">
                    <div class="greeting-star"></div>
                    <div class="greeting-waves">
                      <div class="greeting-wave w1"></div>
                      <div class="greeting-wave w2"></div>
                      <div class="greeting-wave w3"></div>
                    </div>
                    <div class="greeting-particles">
                      <div class="greeting-particle p1"></div>
                      <div class="greeting-particle p2"></div>
                      <div class="greeting-particle p3"></div>
                      <div class="greeting-particle p4"></div>
                      <div class="greeting-particle p5"></div>
                      <div class="greeting-particle p6"></div>
                    </div>
                    <div class="greeting-cosmic-dust"></div>
                  </div>
                </div>
              </div>
              
              <h1 id="WishMessage" class="text-center cosmic-message">
                <span class="cosmic-text">Initializing...</span>
              </h1>
            </div>
          </div>
        </div>
      </section>
      
      <section id="Oval" class="mb-4">
          <div class="row">
              <div class="col-md-1"></div>
              <div class="col-md-10">
                  <div class="d-flex justify-content-center align-items-center" style="height: 80vh;">
                      <!-- Replace the original JarvisHood with Heart container -->
                      <div class="heart-container">
                          <!-- Heart base shape -->
                          <div class="heart-base"></div>
                          
                          <!-- Rotating borders -->
                          <div class="heart-border heart-border-1"></div>
                          <div class="heart-border heart-border-2"></div>
                          <div class="heart-border heart-border-3"></div>
                          
                          <!-- Center pulse -->
                          <div class="heart-center"></div>
                          
                          <!-- Particles -->
                          <div class="particles" id="particles">
                              <!-- Particles will be added by JavaScript -->
                          </div>
                      </div>
                  </div>
                  <h4 class="text-light text text-center">Ask me anything</h4>

                  <div class="col-md-12 mt-4 pt-4">
                      <div class="text-center">
                      <div id="TextInput" class="d-flex">
                          <input
                          type="text"
                          id="chatbox"
                          name="chatbox"
                          placeholder="Ask me anything..."
                          class="input-field"
                          />
                          <button id="SendBtn" class="glow-on-hover" hidden>
                          <i class="bi bi-send"></i>
                          </button>
                          <button id="MicBtn" class="glow-on-hover">
                          <i class="bi bi-mic"></i>
                          </button>
                          <button 
                            id="ChatBtn" 
                            class="glow-on-hover" 
                            data-bs-toggle="offcanvas" 
                            data-bs-target="#offcanvasScrolling" 
                            aria-controls="offcanvasScrolling"
                          >
                          <i class="bi bi-chat-dots"></i>
                          </button>
                          <button id="SettingBtn" class="glow-on-hover">
                          <i class="bi bi-gear-wide-connected"></i>
                          </button>
                      </div>
                      </div>
                  </div>
              </div>
              <div class="col-md-1"></div>
          </div>
      </section>

        <div id="SiriWave" class="mb-4">
            <div class="container">
              <div class="row">
                <div class="col-md-12">
                  <div
                    class="d-flex justify-content-center align-items-center"
                    style="height: 100vh"
                  >
                    <div class="">
                      <p class="text-start text-light mb-4 siri-message">
                        Hello, I am Your Assistant
                      </p>
                      <div id="siri-container"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
        </div>
    </div>

    <!-- URL Template Input Dialog -->
    <div id="url-template-dialog" class="dialog-modal" style="display: none;">
      <div class="dialog-content">
          <h3 id="dialog-title">Enter URL Template</h3>
          <p id="dialog-description">Please enter the URL template. Use {query} where the search term should go.</p>
          <input type="text" id="url-template-input" placeholder="https://example.com/search?q={query}" class="full-width">
          <div class="dialog-buttons">
              <button id="submit-template" class="btn primary-btn">Submit</button>
              <button id="cancel-template" class="btn secondary-btn">Cancel</button>
          </div>
          <div id="url-hint">Hint</div>
      </div>
    </div>

    <div
        class="offcanvas offcanvas-start chat-canvas"
        data-bs-scroll="true"
        data-bs-backdrop="true"
        tabindex="-1"
        id="offcanvasScrolling"
        aria-labelledby="offcanvasScrollingLabel"
    >
        <div class="offcanvas-header">
            <h5 class="offcanvas-title text-white" id="offcanvasScrollingLabel">
                Chats
            </h5>
            <button
                type="button"
                class="btn-close custom-close-btn"
                data-bs-dismiss="offcanvas"
                aria-label="Close"
            ></button>
        </div>
        <div id="chat-canvas-body" class="offcanvas-body"></div>
    </div>

    <!-- Modal Cài đặt -->
    <div class="modal fade" id="settingsModal" tabindex="-1" aria-labelledby="settingsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="settingsModalLabel"><i class="bi bi-gear-fill me-2"></i>System Settings</h5>
                </div>
                <div class="modal-body">
                    <form id="settingsForm">
                        <div class="setting-section">
                            <label for="assistantName" class="form-label"><i class="bi bi-robot me-2"></i>Assistant Name</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="assistantName" placeholder="Enter assistant name">
                                <span class="input-group-text"><i class="bi bi-pencil-fill"></i></span>
                            </div>
                        </div>

                        <div class="setting-section">
                            <label for="ownerName" class="form-label"><i class="bi bi-person-fill me-2"></i>Owner Name</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="ownerName" placeholder="Enter your name">
                                <span class="input-group-text"><i class="bi bi-pencil-fill"></i></span>
                            </div>
                        </div>

                        <div class="setting-section">
                            <label for="volumeRange" class="form-label"><i class="bi bi-volume-up-fill me-2"></i>Volume</label>
                            <input type="range" class="form-range" id="volumeRange" min="0" max="100" value="100">
                            <div class="d-flex justify-content-between">
                                <small><i class="bi bi-volume-mute-fill"></i></small>
                                <small id="volumeValue">100%</small>
                                <small><i class="bi bi-volume-up-fill"></i></small>
                            </div>
                        </div>

                        <div class="setting-section">
                            <label class="form-label"><i class="bi bi-mic-fill me-2"></i>Voice Type</label>
                            <div class="voice-options">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="voiceType" id="maleVoice" value="male" checked>
                                    <label class="form-check-label" for="maleVoice">
                                        <i class="bi bi-gender-male me-1"></i> Male
                                    </label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="voiceType" id="femaleVoice" value="female">
                                    <label class="form-check-label" for="femaleVoice">
                                        <i class="bi bi-gender-female me-1"></i> Female
                                    </label>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="bi bi-x-lg me-2"></i>Close</button>
                    <button type="button" class="btn btn-primary" id="saveSettings"><i class="bi bi-save me-2"></i>Save Settings</button>
                </div>
            </div>
        </div>
    </div>

    <!--Jquery  -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>

    <!-- Siri wave -->
    <script src="https://unpkg.com/siriwave/dist/siriwave.umd.min.js"></script>

    <!-- Lotties File -->
    <script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="main.js"></script>
    <script src="script.js"></script>
    <script src="controller.js"></script>
    <script src="assets/vendore/texllate/jquery.lettering.js"></script>
    <script src="/eel.js"></script>
    <script src="assets/vendore/texllate/jquery.fittext.js"></script>
    <script src="http://jschr.github.io/textillate/jquery.textillate.js"></script>
</body>
</html>